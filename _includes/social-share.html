{% include base_path %}

<section class="page__share">
  {% if site.data.ui-text[site.locale].share_on_label %}
    <h4 class="page__share-title">{{ site.data.ui-text[site.locale].share_on_label | default: "Share on" }}</h4>
  {% endif %}

  <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ base_path }}{{ page.url }}" class="btn btn--linkedin" title="{{ site.data.ui-text[site.locale].share_on_label | default: 'Share on' }} LinkedIn"><i class="fab fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>

  <a href="https://x.com/intent/post?text={{ base_path }}{{ page.url }}" class="btn btn--x" title="{{ site.data.ui-text[site.locale].share_on_label | default: 'Share on' }} X"><i class="fab fa-x-twitter" aria-hidden="true"></i><span> (formerly Twitter)</span></a>

  <button class="btn btn--copy" onclick="copyPageUrl(this)" title="Copy link"><i class="fas fa-link" aria-hidden="true"></i><span> Copy Link</span></button>
</section>

<script>
function copyPageUrl(btn) {
  var url = window.location.href;
  var span = btn.querySelector('span');
  var originalText = span.textContent;
  
  var showCopied = function() {
    span.textContent = ' Copied!';
    setTimeout(function() { span.textContent = originalText; }, 1500);
  };
  
  if (navigator.clipboard) {
    navigator.clipboard.writeText(url).then(showCopied).catch(function() { fallbackCopy(url, showCopied); });
  } else {
    fallbackCopy(url, showCopied);
  }
}

function fallbackCopy(text, callback) {
  var textarea = document.createElement('textarea');
  textarea.value = text;
  textarea.style.position = 'fixed';
  document.body.appendChild(textarea);
  textarea.select();
  document.execCommand('copy');
  document.body.removeChild(textarea);
  callback();
}
</script>
